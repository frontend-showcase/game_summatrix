let e=[],t=0;const n=document.querySelector(".start"),r=document.querySelector(".message-start"),o=document.querySelector(".message-win"),l=document.querySelector(".message-lose"),i=document.querySelector(".game-score");n.addEventListener("click",()=>{"Start"===n.innerHTML?(r.classList.add("hidden"),f(),a(),a()):(f(),o.classList.add("hidden"),l.classList.add("hidden"),r.classList.remove("hidden"),n.classList.replace("restart","start"),n.innerHTML="Start",i.innerText=t=0)}),document.addEventListener("keyup",e=>{if(0===t&&(n.classList.replace("start","restart"),n.innerHTML="Restart"),"ArrowLeft"===e.code?(L(),a()):"ArrowRight"===e.code?(g(),a()):"ArrowUp"===e.code?(m(),a()):"ArrowDown"===e.code&&(h(),a()),i.innerText=t,!x()&&!M()&&!T())return void E()});let s=0,c=0,d=0,u=0;function a(){let t=Math.floor(4*Math.random()),n=Math.floor(4*Math.random());if(0===e[t][n]){let r=document.getElementById(t.toString()+"-"+n.toString());.9>Math.random()?r.innerText="2":r.innerText="4",e[t][n]=+r.innerText;return}T()&&a()}function f(){for(let t of(e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],document.querySelectorAll(".field-cell")))t.innerText="",t.classList.value="",t.classList.add("field-cell")}function m(){for(let t=0;t<4;t++){let n=[e[0][t],e[1][t],e[2][t],e[3][t]];n=S(n);for(let r=0;r<4;r++)e[r][t]=n[r],v(document.getElementById(r.toString()+"-"+t.toString()),e[r][t])}}function h(){for(let t=0;t<4;t++){let n=[e[0][t],e[1][t],e[2][t],e[3][t]];n.reverse(),(n=S(n)).reverse();for(let r=0;r<4;r++)e[r][t]=n[r],v(document.getElementById(r.toString()+"-"+t.toString()),e[r][t])}}function g(){for(let t=0;t<4;t++){let n=e[t];n.reverse(),(n=S(n)).reverse(),e[t]=n;for(let n=0;n<4;n++)v(document.getElementById(t.toString()+"-"+n.toString()),e[t][n])}}function L(){for(let t=0;t<4;t++){let n=e[t];n=S(n),e[t]=n;for(let n=0;n<4;n++)v(document.getElementById(t.toString()+"-"+n.toString()),e[t][n])}}function S(e){let n=y(e);for(let e=0;e<n.length-1;e++)n[e]===n[e+1]&&(n[e]*=2,n[e+1]=0,t+=n[e]);for(n=y(n);n.length<4;)n.push(0);return n}function v(e,t){e.innerText="",e.classList.value="",e.classList.add("field-cell"),t>0&&(e.innerText=t,t<2048?e.classList.add("field-cell--"+ +t.toString()):(e.classList.add("field-cell--2048"),o.classList.remove("hidden")))}function y(e){return e.filter(e=>e)}function T(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(0===e[t][n])return!0;return!1}function E(){l.classList.remove("hidden")}function M(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(e[t][n]===e[t][n+1])return!0;return!1}function x(){let t=[],n=[];for(let n=0;n<4;n++)t.push([e[0][n],e[1][n],e[2][n],e[3][n]]);return t.forEach(e=>n.push(function(e){let t=y(e);for(let e=0;e<t.length-1;e++)if(t[e]===t[e+1])return!0;return!1}(e))),n.some(e=>e)}document.addEventListener("touchstart",e=>{s=e.touches[0].clientX,c=e.touches[0].clientY}),document.addEventListener("touchmove",e=>{d=e.touches[0].clientX,u=e.touches[0].clientY}),document.addEventListener("touchend",()=>{let e=d-s,n=u-c;Math.abs(e)>Math.abs(n)?e>50?(g(),a()):e<-50&&(L(),a()):n>50?(h(),a()):n<-50&&(m(),a()),i.innerText=t,x()||M()||T()||E()});
//# sourceMappingURL=game_summatrix.0f55fb36.js.map
